<html>
  <head>
    <link type="text/css" rel="stylesheet" href="/css/theme.css">
  
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">


      var dropArea = document.getElementById('dropArea');
      dropArea.addEventListener('dragover', function(e) {
          e.preventDefault();
          e.stopPropagation();
      });
      dropArea.addEventListener('dragenter', function(e) {
          e.preventDefault();
          e.stopPropagation();
      });
      dropArea.addEventListener('drop', function(e){
        if(e.originalEvent.dataTransfer){
            if(e.originalEvent.dataTransfer.files.length) {
                e.preventDefault();
                e.stopPropagation();
                var file = e.originalEvent.dataTransfer.files[0];
                var reader = new FileReader();

                reader.onload = function(evt) {
                    var inData = JSON.parse(evt.target.result);
                    console.log(evt.target.result);
                    console.log(inData);
                    
                    google.load("visualization", "1", {packages:["corechart"]});
                    google.setOnLoadCallback(drawChart);
                    function drawChart() {
                      var data = google.visualization.arrayToDataTable([
                        ['Year', 'Sales', 'Expenses'],
                        ['2004',  1000,      400],
                        ['2005',  1170,      460],
                        ['2006',  660,       1120],
                        ['2007',  1030,      540]
                      ]);

                      var options = {
                        title: 'Company Performance'
                      };

                      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                      chart.draw(data, options);
                    }
                    
                    /*google.load("visualization", "1", {packages:["corechart"]});
                    google.setOnLoadCallback(drawChart);
                    function drawChart() {
                        var v = [
                          ["series1", "series2"],
                          [123, 102],
                          [113, 112]
                        ];
                        var chartData = google.visualization.arrayToDataTable(v);
                        //var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                        chart.draw(chartData, {title:"foo"});
                    }*/
                }
                reader.readAsText(file);
            }
        }
    });

    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
    <div id="dropArea" class="drop">Drop here</div>
  </body>
</html>
